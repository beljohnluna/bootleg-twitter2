(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8581:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(2999)}])},2999:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return C},default:function(){return E}});var n=r(5893),a=r(9008),s=r(3801),i=r(7294),o=r(4051),c=r.n(o),l=(r(7898),r(3714)),u=r(2356),d=r(19),f=r(774),x=r(3299);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t,r,n,a,s,i){try{var o=e[s](i),c=o.value}catch(l){return void r(l)}o.done?t(c):Promise.resolve(c).then(n,a)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function i(e){p(s,n,a,i,o,"next",e)}function o(e){p(s,n,a,i,o,"throw",e)}i(void 0)}))}}function b(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var v=function(){var e=(0,x.useSession)().data,t=(0,i.useState)(""),r=t[0],a=t[1],o=(0,i.useState)(null),m=o[0],p=o[1],v=(0,i.useRef)(null),y=(0,i.useState)(!1),j=y[0],g=y[1],w=(0,i.useState)(!1),N=w[0],S=w[1],k=function(){var t=h(c().mark((function t(){var n,s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!N){t.next=2;break}return t.abrupt("return");case 2:return S(!0),t.next=5,(0,d.ET)((0,d.hJ)(u.db,"posts"),{id:e.user.uid,username:e.user.name,userImg:e.user.image,tag:e.user.tag,text:r,timestamp:(0,d.Bt)()});case 5:if(n=t.sent,s=(0,f.iH)(u.t,"posts/".concat(n.id,"/image")),!m){t.next=10;break}return t.next=10,(0,f.sf)(s,m,"data_url").then(h(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.Jt)(s);case 2:return t=e.sent,e.next=5,(0,d.r7)((0,d.JU)(u.db,"posts",n.id),{image:t});case 5:case"end":return e.stop()}}),e)}))));case 10:S(!1),a(""),p(null),g(!1);case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,n.jsxs)("div",{className:'border-b border-gray-200 p-3 flex space-x-3 overflow-y-scroll scrollbar-hide ${loading && "opacity-60"}',children:[(0,n.jsx)("img",{src:e.user.image,alt:"",className:"h-11 w-11 rounded-full cursor-pointer"}),(0,n.jsxs)("div",{className:"divide-y divide-gray-200 w-full",children:[(0,n.jsxs)("div",{className:"".concat(m&&"pb-7"," ").concat(r&&"space-y-2.5"),children:[(0,n.jsx)("textarea",{value:r,onChange:function(e){return a(e.target.value)},placeholder:"What's Poppin'?",rows:"2",className:"text-lg bg-transparent outline-none text-[black] placeholder-gray-500 tracking-wide w-full min-h-[50px]"}),m&&(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute w-8 h-8 bg-[#15181c] hover:bg-[#272c26] bg-opacity-75 rounded-full flex items-center justify-center top-1 left-1 cursor-pointer",onClick:function(){return p(null)},children:(0,n.jsx)(s.b0D,{className:"text-white h-5"})}),(0,n.jsx)("img",{src:m,alt:"",className:"rounded-2xl max-h-80 object-contain"})]})]}),!N&&(0,n.jsxs)("div",{className:"flex items-center justify-between pt-2.5",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsxs)("div",{className:"icon",onClick:function(){return v.current.click()},children:[(0,n.jsx)(s.u3,{className:"h-[22px] text-[#1d9bf0]"}),(0,n.jsx)("input",{type:"file",hidden:!0,onChange:function(e){var t=new FileReader;e.target.files[0]&&t.readAsDataURL(e.target.files[0]),t.onload=function(e){p(e.target.result)}},ref:v})]}),(0,n.jsx)("div",{className:"icon",children:(0,n.jsx)(s.DEq,{className:"text-[#1d9bf0] h-[22px]"})}),(0,n.jsxs)("div",{className:"icon",onClick:function(){return g(!j)},children:[" ",(0,n.jsx)(s.OdW,{className:"text-[#1d9bf0] h-[22px]"})]}),(0,n.jsxs)("div",{className:"icon",children:[" ",(0,n.jsx)(s.Que,{className:"text-[#1d9bf0] h-[22px]"})]}),j&&(0,n.jsx)(l.cW,{onSelect:function(e){var t,n=e.unified.split("-"),s=[];n.forEach((function(e){return s.push("0x"+e)}));var i=(t=String).fromCodePoint.apply(t,b(s));a(r+i)},style:{position:"absolute",marginTop:"450px",marginLeft:-20,maxWidth:"300px",borderRadius:"20px"},theme:"light"})]}),(0,n.jsx)("button",{className:"bg-[#1d9bf0] text-white rounded-full px-4 py-1.5 font-bold shadow-md hover:bg-[#1a8cd8] disabled:hover:bg-[#1d9bf0] disabled:opacity-50 disabled:cursor-default",disabled:!r.trim()&&!m,onClick:k,children:"Twoot"})]})]})]})},y=r(4438);var j=function(){(0,x.useSession)().data;var e=(0,i.useState)([]),t=e[0],r=e[1];return(0,i.useEffect)((function(){return(0,d.cf)((0,d.IO)((0,d.hJ)(u.db,"posts"),(0,d.Xo)("timestamp","desc")),(function(e){r(e.docs)}))}),[u.db]),(0,n.jsxs)("div",{className:"text-black flex-grow border-l border-r max-w-2xl sm:ml-[73px] xl:ml-[370px]",children:[(0,n.jsxs)("div",{className:"text-black flex items-center sm:justify-between py-2 px-3 sticky top-0 z-50 bg-white border-b",children:[(0,n.jsx)("h2",{className:"text-lg sm:text-xl font-bold",children:"Home"}),(0,n.jsx)("div",{className:"hoverAnimation w-9 h-9 flex items-center justify-center xl:px-0",children:(0,n.jsx)(s.T$Z,{className:"h-5 text-black"})})]}),(0,n.jsx)(v,{}),(0,n.jsx)("div",{className:"pb-72",children:t.map((function(e){return(0,n.jsx)(y.Z,{id:e.id,post:e.data(),className:"font-black"},e.id)}))})]})},g=r(3531),w=r(7520),N=r(2804),S=r(2280),k=r(377);function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s=[],i=!0,o=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);i=!0);}catch(c){o=!0,a=c}finally{try{i||null==r.return||r.return()}finally{if(o)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var C=!0;function E(e){e.trendingResults,e.followResults;var t=e.providers,r=(0,x.useSession)().data,s=A((0,N.FV)(k.e),2),i=s[0];s[1];return r?(0,n.jsxs)("div",{className:"",children:[(0,n.jsxs)(a.default,{children:[(0,n.jsx)("title",{children:"Twotter"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsxs)("main",{className:"min-h-screen flex max-w-[1500px] mx-auto",children:[(0,n.jsx)(g.Z,{}),(0,n.jsx)(j,{}),i&&(0,n.jsx)(S.Z,{})]})]}):(0,n.jsx)(w.Z,{providers:t})}}},function(e){e.O(0,[16,885,229,232,949,624,774,888,179],(function(){return t=8581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);